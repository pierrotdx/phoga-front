@if (photos$(); as photos) {
  @for (photo of photos; track photo._id) {
    @if(photo.metadata?.thumbnail; as thumbnail) {
      <div [routerLink]="[photo._id]">
        <img [src]="thumbnail | bufferToImage$ | async" />
      </div>
    } @else {
      <div>{{ photo._id }}</div>
    }
  } @empty {
    <div>no photos available</div>
  }
} @else {
  <div>
    <mat-spinner></mat-spinner>
  </div>
}